\hypertarget{Couche2_8h}{}\doxysection{Couche2.\+h File Reference}
\label{Couche2_8h}\index{Couche2.h@{Couche2.h}}


Header de li\+Implémentation de la couche 2.  


{\ttfamily \#include \char`\"{}header.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Couche1.\+h\char`\"{}}\newline
{\ttfamily \#include \char`\"{}Couche3.\+h\char`\"{}}\newline
\doxysubsection*{Functions}
\begin{DoxyCompactItemize}
\item 
int \mbox{\hyperlink{Couche2_8h_a21010ac245c8076a7f441aa3c6bacbbe}{write\+\_\+super\+\_\+block}} (void)
\begin{DoxyCompactList}\small\item\em Ecrit le super bloc de la variable systeme sur le disque. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{Couche2_8h_a49dbd70d07c45b1c054c89fef22f335e}{read\+\_\+super\+\_\+block}} (void)
\begin{DoxyCompactList}\small\item\em Lis la valeur du super bloc sur le disque et l\textquotesingle{}écrit sur la variable systeme. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{Couche2_8h_ac285c8e8f0927379fd6c9e792f7e2ec6}{update\+\_\+first\+\_\+free\+\_\+byte\+\_\+super\+\_\+block}} (\mbox{\hyperlink{header_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} byte)
\begin{DoxyCompactList}\small\item\em Met à jour le premier octet libre du super bloc dans la variable du systeme et non sur le disque. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{Couche2_8h_aae9a6ce26b7c10156edff96e3ebdcb73}{read\+\_\+inodes\+\_\+table}} (void)
\begin{DoxyCompactList}\small\item\em Lis la valeur de la table d\textquotesingle{}inodes sur le disque et l\textquotesingle{}écrit sur la variable systeme. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{Couche2_8h_aa951478f0d744ff866cfb33082956565}{write\+\_\+inodes\+\_\+table}} (void)
\begin{DoxyCompactList}\small\item\em Ecrit la table d\textquotesingle{}inodes de la variable systeme sur le disque. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{Couche2_8h_ab5fa8058839137ed296e9dab3c88e59d}{delete\+\_\+inode}} (char $\ast$name\+\_\+of\+\_\+file)
\begin{DoxyCompactList}\small\item\em Supprime une inode de la table d\textquotesingle{}inode et met à jour le super bloc. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{Couche2_8h_a575b86f424ea83720340a6359c10156b}{get\+\_\+unused\+\_\+inode}} (void)
\begin{DoxyCompactList}\small\item\em Retourne l\textquotesingle{}indice dans la table d\textquotesingle{}inode du premier inode libre. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{Couche2_8h_a0ea9df8fc525c42304be01d61097130d}{init\+\_\+inode}} (char $\ast$name\+\_\+of\+\_\+file, \mbox{\hyperlink{header_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} size, \mbox{\hyperlink{header_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}} first\+\_\+byte)
\begin{DoxyCompactList}\small\item\em Ecrit un nouvel inode à la suite des autres sur la table d\textquotesingle{}inode. \end{DoxyCompactList}\item 
int \mbox{\hyperlink{Couche2_8h_a9db4755bc8815e6e1aeda575f14e3861}{search\+\_\+file\+\_\+inode}} (char $\ast$name\+\_\+of\+\_\+file)
\begin{DoxyCompactList}\small\item\em Retourne l\textquotesingle{}indice de l\textquotesingle{}inode qui pointe vers un fichier de nom name\+\_\+of\+\_\+file. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{Couche2_8h_a7a3853116cbb25b4772cd1df8d692ea0}{init\+\_\+first\+\_\+time\+\_\+super\+\_\+block}} (void)
\begin{DoxyCompactList}\small\item\em Cette fonction initialise le super bloc pour la première fois. \end{DoxyCompactList}\item 
void \mbox{\hyperlink{Couche2_8h_a1d932e1735f77ec156cc2556e93cfac3}{init\+\_\+first\+\_\+time\+\_\+inodes\+\_\+tables}} (void)
\begin{DoxyCompactList}\small\item\em Cette fonction initialise la table d\textquotesingle{}inodes pour la première fois. \end{DoxyCompactList}\end{DoxyCompactItemize}


\doxysubsection{Detailed Description}
Header de li\+Implémentation de la couche 2. 

\begin{DoxyAuthor}{Author}
Groupe Cosinus 
\end{DoxyAuthor}
\begin{DoxyDate}{Date}
Avril 2022 
\end{DoxyDate}
\begin{DoxyNote}{Note}
La table d\textquotesingle{}inode contient 10 inodes. Les inodes sont soit utilisé, ils ont une position first\+\_\+byte !=0, soit libre ils ont une postion first\+\_\+byte == 0. Les fonctions de lectures et ecrire du super bloc et de la table d\textquotesingle{}inodes n\textquotesingle{}initialise rien, ils ne font que lire et ecrire sur le disque et sur la variable systeme. Les fonctions qui touchent au super bloc et à la table d\textquotesingle{}inode, actualisent ces derniers sur le disque et sur la variable systeme sauf si le contraire est précisé. 
\end{DoxyNote}


\doxysubsection{Function Documentation}
\mbox{\Hypertarget{Couche2_8h_a21010ac245c8076a7f441aa3c6bacbbe}\label{Couche2_8h_a21010ac245c8076a7f441aa3c6bacbbe}} 
\index{Couche2.h@{Couche2.h}!write\_super\_block@{write\_super\_block}}
\index{write\_super\_block@{write\_super\_block}!Couche2.h@{Couche2.h}}
\doxysubsubsection{\texorpdfstring{write\_super\_block()}{write\_super\_block()}}
{\footnotesize\ttfamily int write\+\_\+super\+\_\+block (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Ecrit le super bloc de la variable systeme sur le disque. 


\begin{DoxyParams}{Parameters}
{\em void} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int \+: 0 si tout s\textquotesingle{}est bien passé, 1 sinon 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
variable systeme déjà initialisé 
\end{DoxyPrecond}
\mbox{\Hypertarget{Couche2_8h_a49dbd70d07c45b1c054c89fef22f335e}\label{Couche2_8h_a49dbd70d07c45b1c054c89fef22f335e}} 
\index{Couche2.h@{Couche2.h}!read\_super\_block@{read\_super\_block}}
\index{read\_super\_block@{read\_super\_block}!Couche2.h@{Couche2.h}}
\doxysubsubsection{\texorpdfstring{read\_super\_block()}{read\_super\_block()}}
{\footnotesize\ttfamily int read\+\_\+super\+\_\+block (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Lis la valeur du super bloc sur le disque et l\textquotesingle{}écrit sur la variable systeme. 


\begin{DoxyParams}{Parameters}
{\em void} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int \+: 0 si tout s\textquotesingle{}est bien passé, 1 sinon 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
variable systeme déjà initialisé 
\end{DoxyPrecond}
\mbox{\Hypertarget{Couche2_8h_ac285c8e8f0927379fd6c9e792f7e2ec6}\label{Couche2_8h_ac285c8e8f0927379fd6c9e792f7e2ec6}} 
\index{Couche2.h@{Couche2.h}!update\_first\_free\_byte\_super\_block@{update\_first\_free\_byte\_super\_block}}
\index{update\_first\_free\_byte\_super\_block@{update\_first\_free\_byte\_super\_block}!Couche2.h@{Couche2.h}}
\doxysubsubsection{\texorpdfstring{update\_first\_free\_byte\_super\_block()}{update\_first\_free\_byte\_super\_block()}}
{\footnotesize\ttfamily void update\+\_\+first\+\_\+free\+\_\+byte\+\_\+super\+\_\+block (\begin{DoxyParamCaption}\item[{\mbox{\hyperlink{header_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{byte }\end{DoxyParamCaption})}



Met à jour le premier octet libre du super bloc dans la variable du systeme et non sur le disque. 


\begin{DoxyParams}{Parameters}
{\em uint} & byte \+: octet à mettre à jour \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
variable systeme déjà initialisé 
\end{DoxyPrecond}
\begin{DoxyNote}{Note}
Aucun test de vérification d\textquotesingle{}espace disque n\textquotesingle{}est effectué 
\end{DoxyNote}
\mbox{\Hypertarget{Couche2_8h_aae9a6ce26b7c10156edff96e3ebdcb73}\label{Couche2_8h_aae9a6ce26b7c10156edff96e3ebdcb73}} 
\index{Couche2.h@{Couche2.h}!read\_inodes\_table@{read\_inodes\_table}}
\index{read\_inodes\_table@{read\_inodes\_table}!Couche2.h@{Couche2.h}}
\doxysubsubsection{\texorpdfstring{read\_inodes\_table()}{read\_inodes\_table()}}
{\footnotesize\ttfamily int read\+\_\+inodes\+\_\+table (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Lis la valeur de la table d\textquotesingle{}inodes sur le disque et l\textquotesingle{}écrit sur la variable systeme. 


\begin{DoxyParams}{Parameters}
{\em void} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int \+: 0 si tout s\textquotesingle{}est bien passé, 1 sinon 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
variable systeme déjà initialisé 
\end{DoxyPrecond}
\mbox{\Hypertarget{Couche2_8h_aa951478f0d744ff866cfb33082956565}\label{Couche2_8h_aa951478f0d744ff866cfb33082956565}} 
\index{Couche2.h@{Couche2.h}!write\_inodes\_table@{write\_inodes\_table}}
\index{write\_inodes\_table@{write\_inodes\_table}!Couche2.h@{Couche2.h}}
\doxysubsubsection{\texorpdfstring{write\_inodes\_table()}{write\_inodes\_table()}}
{\footnotesize\ttfamily int write\+\_\+inodes\+\_\+table (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Ecrit la table d\textquotesingle{}inodes de la variable systeme sur le disque. 


\begin{DoxyParams}{Parameters}
{\em void} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int \+: 0 si tout s\textquotesingle{}est bien passé, 1 sinon 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
variable systeme déjà initialisé 
\end{DoxyPrecond}
\begin{DoxyNote}{Note}
exit(1) -\/\texorpdfstring{$>$}{>} erreur curseur \+: exit(2) -\/\texorpdfstring{$>$}{>} erreur écriture 
\end{DoxyNote}
\mbox{\Hypertarget{Couche2_8h_ab5fa8058839137ed296e9dab3c88e59d}\label{Couche2_8h_ab5fa8058839137ed296e9dab3c88e59d}} 
\index{Couche2.h@{Couche2.h}!delete\_inode@{delete\_inode}}
\index{delete\_inode@{delete\_inode}!Couche2.h@{Couche2.h}}
\doxysubsubsection{\texorpdfstring{delete\_inode()}{delete\_inode()}}
{\footnotesize\ttfamily int delete\+\_\+inode (\begin{DoxyParamCaption}\item[{char $\ast$}]{name\+\_\+of\+\_\+file }\end{DoxyParamCaption})}



Supprime une inode de la table d\textquotesingle{}inode et met à jour le super bloc. 


\begin{DoxyParams}{Parameters}
{\em int} & indice\+\_\+inode \+: indice de l\textquotesingle{}inode à supprimer \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int \+: 0 si tout s\textquotesingle{}est bien passé, 1 s\textquotesingle{}il y a eu une erreur, 2 si l\textquotesingle{}inode est déjà libre 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
variable systeme déjà initialisé \&\& len(name\+\_\+of\+\_\+file) \texorpdfstring{$<$}{<} FILENAME\+\_\+\+MAX\+\_\+\+SIZE 
\end{DoxyPrecond}
\begin{DoxyNote}{Note}
La fonction gère si un indice qui correspond à aucun fichier est donné en paramètre 
\end{DoxyNote}
\mbox{\Hypertarget{Couche2_8h_a575b86f424ea83720340a6359c10156b}\label{Couche2_8h_a575b86f424ea83720340a6359c10156b}} 
\index{Couche2.h@{Couche2.h}!get\_unused\_inode@{get\_unused\_inode}}
\index{get\_unused\_inode@{get\_unused\_inode}!Couche2.h@{Couche2.h}}
\doxysubsubsection{\texorpdfstring{get\_unused\_inode()}{get\_unused\_inode()}}
{\footnotesize\ttfamily int get\+\_\+unused\+\_\+inode (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Retourne l\textquotesingle{}indice dans la table d\textquotesingle{}inode du premier inode libre. 


\begin{DoxyParams}{Parameters}
{\em void} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
indice du premier inode libre ou -\/1 si tous les inodes sont occupés 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
variable systeme déjà initialisé 
\end{DoxyPrecond}
\mbox{\Hypertarget{Couche2_8h_a0ea9df8fc525c42304be01d61097130d}\label{Couche2_8h_a0ea9df8fc525c42304be01d61097130d}} 
\index{Couche2.h@{Couche2.h}!init\_inode@{init\_inode}}
\index{init\_inode@{init\_inode}!Couche2.h@{Couche2.h}}
\doxysubsubsection{\texorpdfstring{init\_inode()}{init\_inode()}}
{\footnotesize\ttfamily int init\+\_\+inode (\begin{DoxyParamCaption}\item[{char $\ast$}]{name\+\_\+of\+\_\+file,  }\item[{\mbox{\hyperlink{header_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{size,  }\item[{\mbox{\hyperlink{header_8h_a91ad9478d81a7aaf2593e8d9c3d06a14}{uint}}}]{first\+\_\+byte }\end{DoxyParamCaption})}



Ecrit un nouvel inode à la suite des autres sur la table d\textquotesingle{}inode. 


\begin{DoxyParams}{Parameters}
{\em char\mbox{[}\+FILENAME\+\_\+\+MAX\+\_\+\+SIZE\mbox{]}} & inclut \textbackslash{}\textquotesingle{}0\textquotesingle{} name\+\_\+of\+\_\+file \+: nom du fichier \\
\hline
{\em uint} & size \+: taille du fichier \\
\hline
{\em uint} & first\+\_\+byte \+: premier octet du fichier sur le disque \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int \+: 0 si tout s\textquotesingle{}est bien passé, 1 sinon (ex \+: taille max table inode attteinte) 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
variable systeme déjà initialisé \&\& len(name\+\_\+of\+\_\+file) \texorpdfstring{$<$}{<} FILENAME\+\_\+\+MAX\+\_\+\+SIZE 
\end{DoxyPrecond}
\begin{DoxyNote}{Note}
Met à jour le la table d\textquotesingle{}inode et le super bloc first\+\_\+free\+\_\+byte, nblock et number\+\_\+of\+\_\+files. 
\end{DoxyNote}
\mbox{\Hypertarget{Couche2_8h_a9db4755bc8815e6e1aeda575f14e3861}\label{Couche2_8h_a9db4755bc8815e6e1aeda575f14e3861}} 
\index{Couche2.h@{Couche2.h}!search\_file\_inode@{search\_file\_inode}}
\index{search\_file\_inode@{search\_file\_inode}!Couche2.h@{Couche2.h}}
\doxysubsubsection{\texorpdfstring{search\_file\_inode()}{search\_file\_inode()}}
{\footnotesize\ttfamily int search\+\_\+file\+\_\+inode (\begin{DoxyParamCaption}\item[{char $\ast$}]{name\+\_\+of\+\_\+file }\end{DoxyParamCaption})}



Retourne l\textquotesingle{}indice de l\textquotesingle{}inode qui pointe vers un fichier de nom name\+\_\+of\+\_\+file. 


\begin{DoxyParams}{Parameters}
{\em char} & name\+\_\+of\+\_\+file\mbox{[}MAX\+\_\+\+FILE\+\_\+\+SIZE\mbox{]} \+: nom du fichier à chercher \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
int \+: indice de l\textquotesingle{}inode ou -\/1 s\textquotesingle{}il n\textquotesingle{}existe pas 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
variable systeme déjà initialisé \&\& len(name\+\_\+of\+\_\+file) \texorpdfstring{$<$}{<}= FILENAME\+\_\+\+MAX\+\_\+\+SIZE 
\end{DoxyPrecond}
\mbox{\Hypertarget{Couche2_8h_a7a3853116cbb25b4772cd1df8d692ea0}\label{Couche2_8h_a7a3853116cbb25b4772cd1df8d692ea0}} 
\index{Couche2.h@{Couche2.h}!init\_first\_time\_super\_block@{init\_first\_time\_super\_block}}
\index{init\_first\_time\_super\_block@{init\_first\_time\_super\_block}!Couche2.h@{Couche2.h}}
\doxysubsubsection{\texorpdfstring{init\_first\_time\_super\_block()}{init\_first\_time\_super\_block()}}
{\footnotesize\ttfamily void init\+\_\+first\+\_\+time\+\_\+super\+\_\+block (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Cette fonction initialise le super bloc pour la première fois. 


\begin{DoxyParams}{Parameters}
{\em void} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
variable systeme déjà initialisé 
\end{DoxyPrecond}
\mbox{\Hypertarget{Couche2_8h_a1d932e1735f77ec156cc2556e93cfac3}\label{Couche2_8h_a1d932e1735f77ec156cc2556e93cfac3}} 
\index{Couche2.h@{Couche2.h}!init\_first\_time\_inodes\_tables@{init\_first\_time\_inodes\_tables}}
\index{init\_first\_time\_inodes\_tables@{init\_first\_time\_inodes\_tables}!Couche2.h@{Couche2.h}}
\doxysubsubsection{\texorpdfstring{init\_first\_time\_inodes\_tables()}{init\_first\_time\_inodes\_tables()}}
{\footnotesize\ttfamily void init\+\_\+first\+\_\+time\+\_\+inodes\+\_\+tables (\begin{DoxyParamCaption}\item[{void}]{ }\end{DoxyParamCaption})}



Cette fonction initialise la table d\textquotesingle{}inodes pour la première fois. 


\begin{DoxyParams}{Parameters}
{\em void} & \\
\hline
\end{DoxyParams}
\begin{DoxyReturn}{Returns}
void 
\end{DoxyReturn}
\begin{DoxyPrecond}{Precondition}
variable systeme déjà initialisé 
\end{DoxyPrecond}
